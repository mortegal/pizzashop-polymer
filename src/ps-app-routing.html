<link rel="import" href="/bower_components/polymer/polymer-element.html">
<link rel="import" href="/bower_components/iron-lazy-pages/iron-lazy-pages.html">
<link rel="import" href="./core/routing/ps-routing-mixin.html">
<link rel="import" href="./ps-app-home.html">

<dom-module id="ps-app-routing">
    <template>

        <style>
            /** 
             * Before the component is defined, we can 
             * use the :not(:defined) selector to build
             * a layout that resembles the component.
             *
             * This selector is not polyfilled, so an alternative
             * can be to use an attribute inactive, and remove it
             * on the connectedCallback of the component.
             */

            ps-app-pizza:not(:defined) {
                height: 100%;
                width: 100%;
                background-color: green;
                display: block;
            }

            /**
             * If we wan't our components to occupy all the content
             * available we must set iron-pages height to 100%
             */

            iron-lazy-pages {
                height: 100%;
            }
        </style>

        <iron-lazy-pages role="main" selected="[[page]]" attr-for-selected="name">
            <template name="home" is="dom-if" restamp>
                <ps-app-home></ps-app-home>
            </template>
            <template name="pizzas" is="dom-if" restamp>
                <ps-app-pizza></ps-app-pizza>
            </template>
            <template name="fallback" is="dom-if" restamp>
                <ps-not-found></ps-not-found>
            </template>
        </iron-lazy-pages>

    </template>
    <script>

        class PsAppRouting extends PsRoutingMixin(Polymer.Element) {
            static get is() {return 'ps-app-routing';}
            static get properties() {
                return {
                    routes: {
                        type: Array,
                        value: () => [
                            {path: '/', page: 'home', default: true},
                            {path: '/pizzas', page: 'pizzas', load: 'pizza/ps-app-pizza.html', hasChildren: true},
                            {page: 'fallback', load: 'core/pages/ps-not-found.html', fallback: true},
                        ],
                        readOnly: true
                    },
                };
            }
        }
        customElements.define(PsAppRouting.is, PsAppRouting);

    </script>
</dom-module>